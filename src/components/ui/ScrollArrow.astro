---
const { class: className } = Astro.props;
---

<!-- 
  Reflected Arrow Component
  - Uses CSS Masking to show the fixed background through the arrow shape.
  - Layer 1: Container with fixed background (Yellow reflection). Masked by arrow.
  - Layer 2: SVG Outline (Yellow stroke) on top.
-->
<div class={`arrow-container ${className || ""}`}>
    <!-- The reflection layer -->
    <div class="arrow-fill-mask shine-reflection"></div>

    <!-- The outline layer -->
    <svg
        class="arrow-outline"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 1920 1920"
    >
        <path
            d="M1086.64,1600.74l427.78-427.99c67.61-69.25,67-180.09-1.44-248.72l-87.68-87.48-314.9,314.9V266.86h-300.76v884.59l-314.9-314.9-87.69,87.48c-69.04,69.25-69.04,181.11,0,250.36l426.35,426.34c69.87,69.87,183.16,69.87,253.23,0Z"
            fill="none"
            stroke="var(--secondary-color)"
            stroke-width="25px"></path>
    </svg>
</div>

<style>
    .arrow-container {
        position: relative;
        width: 60px; /* Match existing size */
        height: 60px; /* Approximate aspect ratio, will conform to SVG */
        display: block;
        aspect-ratio: 1 / 1; /* Adjust based on viewBox if needed, arrow is roughly squareish 1920x1920? Yes */
    }

    .arrow-fill-mask.shine-reflection {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;

        /* The Magic: Fixed Gradient Reflection */
        /* Must match global.css .condenso-text exactly */
        background: linear-gradient(
            to bottom,
            rgba(245, 229, 144, 0) 20%,
            rgba(245, 229, 144, 1) 40%,
            rgba(245, 229, 144, 1) 80%,
            rgba(245, 229, 144, 0) 100%
        );
        background-attachment: fixed;
        background-size: 100% 100vh;
        background-position: center;
        background-repeat: no-repeat;

        /* Function as a mask so we only see gradient inside arrow shape */
        -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1920 1920'%3E%3Cpath d='M1086.64,1600.74l427.78-427.99c67.61-69.25,67-180.09-1.44-248.72l-87.68-87.48-314.9,314.9V266.86h-300.76v884.59l-314.9-314.9-87.69,87.48c-69.04,69.25-69.04,181.11,0,250.36l426.35,426.34c69.87,69.87,183.16,69.87,253.23,0Z'/%3E%3C/svg%3E");
        mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1920 1920'%3E%3Cpath d='M1086.64,1600.74l427.78-427.99c67.61-69.25,67-180.09-1.44-248.72l-87.68-87.48-314.9,314.9V266.86h-300.76v884.59l-314.9-314.9-87.69,87.48c-69.04,69.25-69.04,181.11,0,250.36l426.35,426.34c69.87,69.87,183.16,69.87,253.23,0Z'/%3E%3C/svg%3E");
        -webkit-mask-size: contain;
        mask-size: contain;
        -webkit-mask-repeat: no-repeat;
        mask-repeat: no-repeat;
        -webkit-mask-position: center;
        mask-position: center;
    }

    .arrow-outline {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none; /* Let clicks pass through if needed */
    }
</style>
