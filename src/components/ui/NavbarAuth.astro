---
// Rimosso import di Auth component perché non serve più qui
// Rimosso import di Auth component perché non serve più qui
---

<div class="nav-auth-wrapper">
    <!-- Icona Profilo con Link Dinamico -->
    <a
        href="/daivai/login"
        id="profile-link"
        class="profile-btn"
        aria-label="Area Personale"
    >
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            ><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle
                cx="12"
                cy="7"
                r="4"></circle></svg
        >
    </a>
</div>

<script>
    import { supabase } from "../../lib/supabase";

    // Update profile link based on auth status
    async function updateProfileLink() {
        const {
            data: { user },
        } = await supabase.auth.getUser();
        const profileLink = document.getElementById("profile-link");

        if (user && profileLink) {
            profileLink.href = "/daivai/profile";

            // Hide profile icon if we're on the profile page
            if (window.location.pathname === "/daivai/profile") {
                profileLink.style.display = "none";
            }
        }
    }

    updateProfileLink();
</script>

<style>
    .nav-auth-wrapper {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
    }

    .profile-btn {
        background: var(--primary-color);
        color: white;
        border: none;
        padding: 12px;
        border-radius: 50%;
        cursor: pointer;
        box-shadow: var(--shadow-primary);
        transition: transform 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none; /* Importante per il link */
    }

    .profile-btn:hover {
        transform: scale(1.1);
    }
</style>
